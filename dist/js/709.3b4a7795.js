"use strict";(self["webpackChunkpro_summary_vue3_0"]=self["webpackChunkpro_summary_vue3_0"]||[]).push([[709],{1893:function(e,i,t){t.d(i,{Z:function(){return u}});var a=t(3396),s=t(7139);const n={class:"footer"},o={class:"tablist"},l=["onClick"];var r={__name:"TabBar",props:{tabIndex:{typeof:Number,default:0}},setup(e){const i=[{name:"首页",path:"/index",icon:"iconhome1"},{name:"群聊",path:"/groupchat",icon:"iconduihuakuang"},{name:"动态",path:"/dynamic",icon:"icondongtai"},{name:"我的",path:"/user",icon:"iconwodewo"}];return(t,r)=>((0,a.wg)(),(0,a.iD)("footer",n,[(0,a._)("ul",o,[((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)(i,((i,n)=>(0,a._)("li",{class:(0,s.C_)(["item",{active:e.tabIndex==n}]),onClick:e=>t.$toPath(i.path),key:n},[(0,a._)("i",{class:(0,s.C_)(["iconfont",i.icon])},null,2),(0,a._)("span",null,(0,s.zw)(i.name),1)],10,l))),64))])]))}},d=t(89);const c=(0,d.Z)(r,[["__scopeId","data-v-27133d0a"]]);var u=c},8319:function(e,i,t){t.r(i),t.d(i,{default:function(){return M}});var a=t(1893),s=t(1404),n=t(3396),o=t(4870),l=t(610),r=t(5323),d=t(7936),c=t(253),u=t(3444);const m=Symbol(),h=()=>(0,n.f3)(m,null);var f=t(2229);const[g,p,v]=(0,l["do"])("list"),b={error:Boolean,offset:(0,r.SI)(300),loading:Boolean,finished:Boolean,errorText:String,direction:(0,r.SQ)("down"),loadingText:String,finishedText:String,immediateCheck:r.J5};var _=(0,n.aZ)({name:g,props:b,emits:["load","update:error","update:loading"],setup(e,{emit:i,slots:t}){const a=(0,o.iH)(!1),s=(0,o.iH)(),l=(0,o.iH)(),r=h(),m=(0,c.eo)(s),g=()=>{(0,n.Y3)((()=>{if(a.value||e.finished||e.error||!1===(null==r?void 0:r.value))return;const{offset:t,direction:n}=e,o=(0,c.EL)(m);if(!o.height||(0,d.xj)(s))return;let u=!1;const h=(0,c.EL)(l);u="up"===n?o.top-h.top<=t:h.bottom-o.bottom<=t,u&&(a.value=!0,i("update:loading",!0),i("load"))}))},b=()=>{if(e.finished){const i=t.finished?t.finished():e.finishedText;if(i)return(0,n.Wm)("div",{class:p("finished-text")},[i])}},_=()=>{i("update:error",!1),g()},w=()=>{if(e.error){const i=t.error?t.error():e.errorText;if(i)return(0,n.Wm)("div",{role:"button",class:p("error-text"),tabindex:0,onClick:_},[i])}},k=()=>{if(a.value&&!e.finished)return(0,n.Wm)("div",{class:p("loading")},[t.loading?t.loading():(0,n.Wm)(f.g,{class:p("loading-icon")},{default:()=>[e.loadingText||v("loading")]})])};return(0,n.YP)((()=>[e.loading,e.finished,e.error]),g),r&&(0,n.YP)(r,(e=>{e&&g()})),(0,n.ic)((()=>{a.value=e.loading})),(0,n.bv)((()=>{e.immediateCheck&&g()})),(0,u.F)({check:g}),(0,c.OR)("scroll",g,{target:m,passive:!0}),()=>{var i;const o=null==(i=t.default)?void 0:i.call(t),r=(0,n.Wm)("div",{ref:l,class:p("placeholder")},null);return(0,n.Wm)("div",{ref:s,role:"feed",class:p(),"aria-busy":a.value},["down"===e.direction?o:r,k(),b(),w(),"up"===e.direction?o:r])}}});const w=(0,s.n)(_);t(1958),t(2939);var k=t(4250),y=(t(7461),t(3)),x=(t(6145),t(316)),I=(t(4165),t(7139));const C=e=>((0,n.dD)("data-v-5972d60b"),e=e(),(0,n.Cn)(),e),L={class:"dynamic-page page tabbar-page header-page"},T={class:"top"},W=C((()=>(0,n._)("div",{class:"bgbanner"},null,-1))),D={class:"avatarInfo"},H={class:"self-name"},S={class:"name"},z={class:"dynamic-list"},$={class:"inner-box"},U={class:"left"},Z=["src"],Y={class:"right-info"},B={class:"display-name"},N={class:"content"},P={class:"imgList"},E={key:0},F={class:"time-headle"},J={class:"time"},K=["onClick"];function V(e,i,t,s,o,l){const r=(0,n.up)("si-header"),d=x.J,c=y.E,u=k.b,m=w,h=a.Z;return(0,n.wg)(),(0,n.iD)("div",L,[(0,n.Wm)(r,{title:"动态",isback:"-1"}),(0,n._)("div",T,[W,(0,n._)("div",{class:"publish",onClick:i[0]||(i[0]=i=>e.$toPath("/dynamic-add"))},[(0,n.Wm)(d,{name:"add"})]),(0,n._)("div",D,[(0,n._)("div",H,[(0,n._)("div",S,(0,I.zw)(o.userInfo.displayName||"未设置"),1),(0,n.Wm)(c,{style:{"border-radius":"5px",overflow:"hidden"},width:"60",height:"60",fit:"cover",src:e.$config.baseUrl+o.userInfo.headurl},null,8,["src"])])])]),(0,n._)("div",z,[(0,n.Wm)(m,{loading:o.loading,"onUpdate:loading":i[1]||(i[1]=e=>o.loading=e),finished:o.finished,offset:"50","finished-text":"没有更多了",onLoad:l.onLoad},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.dynamicList,(i=>((0,n.wg)(),(0,n.j4)(u,{class:"item",key:i.id},{default:(0,n.w5)((()=>[(0,n._)("div",$,[(0,n._)("div",U,[(0,n._)("img",{src:e.$config.baseUrl+i.users.headurl},null,8,Z)]),(0,n._)("div",Y,[(0,n._)("div",B,(0,I.zw)(i.users.displayName||"未设置"),1),(0,n._)("div",N,(0,I.zw)(i.content),1),(0,n._)("div",P,[i.paths&&1==i.paths.length?((0,n.wg)(),(0,n.iD)("div",E,[(0,n.Wm)(c,{style:{"max-height":"160px"},width:"230",height:"180",position:"left",fit:"scale-down",src:e.$config.baseUrl+i.paths[0],onClick:t=>l.showImg(e.$config.baseUrl+i.paths[0])},null,8,["src","onClick"])])):i.paths&&i.paths.length>1?((0,n.wg)(!0),(0,n.iD)(n.HY,{key:1},(0,n.Ko)(i.paths,((t,a)=>((0,n.wg)(),(0,n.iD)("div",{class:"item-img",key:t},[(0,n.Wm)(c,{width:"80",height:"80",fit:"cover",src:e.$config.baseUrl+t,onClick:e=>l.showImgs(i.paths,a)},null,8,["src","onClick"])])))),128)):(0,n.kq)("",!0)]),(0,n._)("div",F,[(0,n._)("div",J,(0,I.zw)(l.publishTime(i.createTime)),1),i.users.id==o.userInfo.id?((0,n.wg)(),(0,n.iD)("div",{key:0,class:"delete",onClick:e=>l.removeItem(i.id)},"删除 ",8,K)):(0,n.kq)("",!0)])])])])),_:2},1024)))),128))])),_:1},8,["loading","finished","onLoad"])]),(0,n.Wm)(h,{tabIndex:2})])}t(7658);var j=t(6474),q=t(2115),O=t(6239),Q=t(3573),R={name:"Dynamic",data(){return{userInfo:JSON.parse(localStorage.getItem("userInfo")),defaultHeadurl:"",dynamicList:[],finished:!1,loading:!1,size:10,number:1}},components:{SiHeader:q.Z,TabBar:a.Z},computed:{},methods:{removeItem(e){O.V.confirm({title:"",message:"确认删除该动态？ "}).then((()=>{(0,j.VH)(e).then((()=>{this.dynamicList=this.dynamicList.filter((i=>i.id!=e))}))}))},showImg(e){(0,Q.e)([e.replace("-small","")])},showImgs(e,i){let t=[];e.forEach((e=>{t.push(this.$config.baseUrl+e.replace("-small",""))})),(0,Q.e)({images:t,startPosition:i})},publishTime(e){let i=new Date(e).getTime(),t=(new Date).getTime(),a=t-i;return a<6e4?"刚刚":a<36e5?(a/1e3/60).toFixed(0)+"分钟前":a<864e5?(a/36e5).toFixed(0)+"小时前":(a/864e5).toFixed(0)+"天前"},onLoad(){this.getList()},getList(){let e={pageSize:this.size,pageNumber:this.number};(0,j.wV)(e).then((e=>{this.dynamicList=[...this.dynamicList,...e.result.list],this.number++,this.loading=!1,0==e.result.list.length&&(this.finished=!0)}))}},mounted(){this.defaultHeadurl=localStorage.getItem("userHead")}},A=t(89);const G=(0,A.Z)(R,[["render",V],["__scopeId","data-v-5972d60b"]]);var M=G},7461:function(e,i,t){t(1958),t(368),t(6742),t(3094)},6145:function(e,i,t){t(1958),t(368),t(6742),t(7179)}}]);
//# sourceMappingURL=709.3b4a7795.js.map